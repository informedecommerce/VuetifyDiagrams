(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e(require("vue")):"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["diagram"]=e(require("vue")):t["diagram"]=e(t["Vue"])})("undefined"!==typeof self?self:this,(function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fb15")}({"0a01":function(t,e,i){"use strict";i("151d")},"0a49":function(t,e,i){var n=i("9b43"),o=i("626a"),r=i("4bf8"),s=i("9def"),a=i("cd1c");t.exports=function(t,e){var i=1==t,c=2==t,l=3==t,d=4==t,u=6==t,h=5==t||u,f=e||a;return function(e,a,p){for(var v,m,g=r(e),k=o(g),b=n(a,p,3),y=s(k.length),x=0,w=i?f(e,y):c?f(e,0):void 0;y>x;x++)if((h||x in k)&&(v=k[x],m=b(v,x,g),t))if(i)w[x]=m;else if(m)switch(t){case 3:return!0;case 5:return v;case 6:return x;case 2:w.push(v)}else if(d)return!1;return u?-1:l||d?d:w}}},"0bfb":function(t,e,i){"use strict";var n=i("cb7c");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0d58":function(t,e,i){var n=i("ce10"),o=i("e11e");t.exports=Object.keys||function(t){return n(t,o)}},1169:function(t,e,i){var n=i("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"11e9":function(t,e,i){var n=i("52a7"),o=i("4630"),r=i("6821"),s=i("6a99"),a=i("69a8"),c=i("c69a"),l=Object.getOwnPropertyDescriptor;e.f=i("9e1e")?l:function(t,e){if(t=r(t),e=s(e,!0),c)try{return l(t,e)}catch(i){}if(a(t,e))return o(!n.f.call(t,e),t[e])}},1495:function(t,e,i){var n=i("86cc"),o=i("cb7c"),r=i("0d58");t.exports=i("9e1e")?Object.defineProperties:function(t,e){o(t);var i,s=r(e),a=s.length,c=0;while(a>c)n.f(t,i=s[c++],e[i]);return t}},"151d":function(t,e,i){},"230e":function(t,e,i){var n=i("d3f4"),o=i("7726").document,r=n(o)&&n(o.createElement);t.exports=function(t){return r?o.createElement(t):{}}},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"29fc":function(t,e,i){},"2aba":function(t,e,i){var n=i("7726"),o=i("32e9"),r=i("69a8"),s=i("ca5a")("src"),a=i("fa5b"),c="toString",l=(""+a).split(c);i("8378").inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,i,a){var c="function"==typeof i;c&&(r(i,"name")||o(i,"name",e)),t[e]!==i&&(c&&(r(i,s)||o(i,s,t[e]?""+t[e]:l.join(String(e)))),t===n?t[e]=i:a?t[e]?t[e]=i:o(t,e,i):(delete t[e],o(t,e,i)))})(Function.prototype,c,(function(){return"function"==typeof this&&this[s]||a.call(this)}))},"2aeb":function(t,e,i){var n=i("cb7c"),o=i("1495"),r=i("e11e"),s=i("613b")("IE_PROTO"),a=function(){},c="prototype",l=function(){var t,e=i("230e")("iframe"),n=r.length,o="<",s=">";e.style.display="none",i("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(o+"script"+s+"document.F=Object"+o+"/script"+s),t.close(),l=t.F;while(n--)delete l[c][r[n]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(a[c]=n(t),i=new a,a[c]=null,i[s]=t):i=l(),void 0===e?i:o(i,e)}},"2b4c":function(t,e,i){var n=i("5537")("wks"),o=i("ca5a"),r=i("7726").Symbol,s="function"==typeof r,a=t.exports=function(t){return n[t]||(n[t]=s&&r[t]||(s?r:o)("Symbol."+t))};a.store=n},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},"32e9":function(t,e,i){var n=i("86cc"),o=i("4630");t.exports=i("9e1e")?function(t,e,i){return n.f(t,e,o(1,i))}:function(t,e,i){return t[e]=i,t}},3846:function(t,e,i){i("9e1e")&&"g"!=/./g.flags&&i("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:i("0bfb")})},"386b":function(t,e,i){var n=i("5ca1"),o=i("79e5"),r=i("be13"),s=/"/g,a=function(t,e,i,n){var o=String(r(t)),a="<"+e;return""!==i&&(a+=" "+i+'="'+String(n).replace(s,"&quot;")+'"'),a+">"+o+"</"+e+">"};t.exports=function(t,e){var i={};i[t]=e(a),n(n.P+n.F*o((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",i)}},4588:function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"4bf8":function(t,e,i){var n=i("be13");t.exports=function(t){return Object(n(t))}},"52a7":function(t,e){e.f={}.propertyIsEnumerable},5537:function(t,e,i){var n=i("8378"),o=i("7726"),r="__core-js_shared__",s=o[r]||(o[r]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i("2d00")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(t,e,i){var n=i("7726"),o=i("8378"),r=i("32e9"),s=i("2aba"),a=i("9b43"),c="prototype",l=function(t,e,i){var d,u,h,f,p=t&l.F,v=t&l.G,m=t&l.S,g=t&l.P,k=t&l.B,b=v?n:m?n[e]||(n[e]={}):(n[e]||{})[c],y=v?o:o[e]||(o[e]={}),x=y[c]||(y[c]={});for(d in v&&(i=e),i)u=!p&&b&&void 0!==b[d],h=(u?b:i)[d],f=k&&u?a(h,n):g&&"function"==typeof h?a(Function.call,h):h,b&&s(b,d,h,t&l.U),y[d]!=h&&r(y,d,f),g&&x[d]!=h&&(x[d]=h)};n.core=o,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},"5dbc":function(t,e,i){var n=i("d3f4"),o=i("8b97").set;t.exports=function(t,e,i){var r,s=e.constructor;return s!==i&&"function"==typeof s&&(r=s.prototype)!==i.prototype&&n(r)&&o&&o(t,r),t}},"613b":function(t,e,i){var n=i("5537")("keys"),o=i("ca5a");t.exports=function(t){return n[t]||(n[t]=o(t))}},"626a":function(t,e,i){var n=i("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},"62e4":function(t,e,i){},6821:function(t,e,i){var n=i("626a"),o=i("be13");t.exports=function(t){return n(o(t))}},"69a8":function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},"6a99":function(t,e,i){var n=i("d3f4");t.exports=function(t,e){if(!n(t))return t;var i,o;if(e&&"function"==typeof(i=t.toString)&&!n(o=i.call(t)))return o;if("function"==typeof(i=t.valueOf)&&!n(o=i.call(t)))return o;if(!e&&"function"==typeof(i=t.toString)&&!n(o=i.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},"6b54":function(t,e,i){"use strict";i("3846");var n=i("cb7c"),o=i("0bfb"),r=i("9e1e"),s="toString",a=/./[s],c=function(t){i("2aba")(RegExp.prototype,s,t,!0)};i("79e5")((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?c((function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?o.call(t):void 0)})):a.name!=s&&c((function(){return a.call(this)}))},7333:function(t,e,i){"use strict";var n=i("9e1e"),o=i("0d58"),r=i("2621"),s=i("52a7"),a=i("4bf8"),c=i("626a"),l=Object.assign;t.exports=!l||i("79e5")((function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=l({},t)[i]||Object.keys(l({},e)).join("")!=n}))?function(t,e){var i=a(t),l=arguments.length,d=1,u=r.f,h=s.f;while(l>d){var f,p=c(arguments[d++]),v=u?o(p).concat(u(p)):o(p),m=v.length,g=0;while(m>g)f=v[g++],n&&!h.call(p,f)||(i[f]=p[f])}return i}:l},7514:function(t,e,i){"use strict";var n=i("5ca1"),o=i("0a49")(5),r="find",s=!0;r in[]&&Array(1)[r]((function(){s=!1})),n(n.P+n.F*s,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")(r)},7726:function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},"77f1":function(t,e,i){var n=i("4588"),o=Math.max,r=Math.min;t.exports=function(t,e){return t=n(t),t<0?o(t+e,0):r(t,e)}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"7f7f":function(t,e,i){var n=i("86cc").f,o=Function.prototype,r=/^\s*function ([^ (]*)/,s="name";s in o||i("9e1e")&&n(o,s,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},8245:function(t,e,i){"use strict";i("29fc")},8378:function(t,e){var i=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=i)},"86cc":function(t,e,i){var n=i("cb7c"),o=i("c69a"),r=i("6a99"),s=Object.defineProperty;e.f=i("9e1e")?Object.defineProperty:function(t,e,i){if(n(t),e=r(e,!0),n(i),o)try{return s(t,e,i)}catch(a){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},"8b97":function(t,e,i){var n=i("d3f4"),o=i("cb7c"),r=function(t,e){if(o(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=i("9b43")(Function.call,i("11e9").f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(o){e=!0}return function(t,i){return r(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:r}},"8bbf":function(e,i){e.exports=t},9093:function(t,e,i){var n=i("ce10"),o=i("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},9385:function(t,e,i){"use strict";i("f4c9")},"9b43":function(t,e,i){var n=i("d8e8");t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,o){return t.call(e,i,n,o)}}return function(){return t.apply(e,arguments)}}},"9c6c":function(t,e,i){var n=i("2b4c")("unscopables"),o=Array.prototype;void 0==o[n]&&i("32e9")(o,n,{}),t.exports=function(t){o[n][t]=!0}},"9def":function(t,e,i){var n=i("4588"),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},"9e1e":function(t,e,i){t.exports=!i("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},aa77:function(t,e,i){var n=i("5ca1"),o=i("be13"),r=i("79e5"),s=i("fdef"),a="["+s+"]",c="​",l=RegExp("^"+a+a+"*"),d=RegExp(a+a+"*$"),u=function(t,e,i){var o={},a=r((function(){return!!s[t]()||c[t]()!=c})),l=o[t]=a?e(h):s[t];i&&(o[i]=l),n(n.P+n.F*a,"String",o)},h=u.trim=function(t,e){return t=String(o(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(d,"")),t};t.exports=u},afb7:function(t,e,i){"use strict";i("62e4")},b245:function(t,e,i){},b54a:function(t,e,i){"use strict";i("386b")("link",(function(t){return function(e){return t(this,"a","href",e)}}))},b9d3:function(t,e,i){"use strict";i("b245")},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},c366:function(t,e,i){var n=i("6821"),o=i("9def"),r=i("77f1");t.exports=function(t){return function(e,i,s){var a,c=n(e),l=o(c.length),d=r(s,l);if(t&&i!=i){while(l>d)if(a=c[d++],a!=a)return!0}else for(;l>d;d++)if((t||d in c)&&c[d]===i)return t||d||0;return!t&&-1}}},c5f6:function(t,e,i){"use strict";var n=i("7726"),o=i("69a8"),r=i("2d95"),s=i("5dbc"),a=i("6a99"),c=i("79e5"),l=i("9093").f,d=i("11e9").f,u=i("86cc").f,h=i("aa77").trim,f="Number",p=n[f],v=p,m=p.prototype,g=r(i("2aeb")(m))==f,k="trim"in String.prototype,b=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){e=k?e.trim():h(e,3);var i,n,o,r=e.charCodeAt(0);if(43===r||45===r){if(i=e.charCodeAt(2),88===i||120===i)return NaN}else if(48===r){switch(e.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+e}for(var s,c=e.slice(2),l=0,d=c.length;l<d;l++)if(s=c.charCodeAt(l),s<48||s>o)return NaN;return parseInt(c,n)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof p&&(g?c((function(){m.valueOf.call(i)})):r(i)!=f)?s(new v(b(e)),i,p):b(e)};for(var y,x=i("9e1e")?l(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;x.length>w;w++)o(v,y=x[w])&&!o(p,y)&&u(p,y,d(v,y));p.prototype=m,m.constructor=p,i("2aba")(n,f,p)}},c69a:function(t,e,i){t.exports=!i("9e1e")&&!i("79e5")((function(){return 7!=Object.defineProperty(i("230e")("div"),"a",{get:function(){return 7}}).a}))},ca5a:function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},cb7c:function(t,e,i){var n=i("d3f4");t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},cd1c:function(t,e,i){var n=i("e853");t.exports=function(t,e){return new(n(t))(e)}},ce10:function(t,e,i){var n=i("69a8"),o=i("6821"),r=i("c366")(!1),s=i("613b")("IE_PROTO");t.exports=function(t,e){var i,a=o(t),c=0,l=[];for(i in a)i!=s&&n(a,i)&&l.push(i);while(e.length>c)n(a,i=e[c++])&&(~r(l,i)||l.push(i));return l}},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},e3f4:function(t,e,i){},e853:function(t,e,i){var n=i("d3f4"),o=i("1169"),r=i("2b4c")("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),n(e)&&(e=e[r],null===e&&(e=void 0))),void 0===e?Array:e}},f4c9:function(t,e,i){},f6fd:function(t,e){(function(t){var e="currentScript",i=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(n){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(n.stack)||[!1])[1];for(t in i)if(i[t].src==e||"interactive"==i[t].readyState)return i[t];return null}}})})(document)},f751:function(t,e,i){var n=i("5ca1");n(n.S+n.F,"Object",{assign:i("7333")})},fa5b:function(t,e,i){t.exports=i("5537")("native-function-to-string",Function.toString)},fab2:function(t,e,i){var n=i("7726").document;t.exports=n&&n.documentElement},fb15:function(t,e,i){"use strict";var n;(i.r(e),i.d(e,"Diagram",(function(){return A})),i.d(e,"DiagramEditor",(function(){return ut})),"undefined"!==typeof window)&&(i("f6fd"),(n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(i.p=n[1]));i("8bbf");var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"field",staticClass:"scrollXY",attrs:{id:"svg-diagram-show-area"}},[i("svg",{attrs:{width:t.fluid?"100%":t.width,height:t.fluid?"100%":t.height,viewBox:t.viewBoxDiagram,xmlns:"http://www.w3.org/2000/svg"}},[i("defs",[i("pattern",{attrs:{id:"smallGrid",width:"10",height:"10",patternUnits:"userSpaceOnUse"}},[i("path",{attrs:{d:"M 10 0 L 0 0 0 10",fill:"none",stroke:"gray","stroke-width":"0.5"}})]),i("pattern",{attrs:{id:"grid",width:"100",height:"100",patternUnits:"userSpaceOnUse"}},[i("rect",{attrs:{width:"100",height:"100",fill:"url(#smallGrid)"}}),i("path",{attrs:{d:"M 100 0 L 0 0 0 100",fill:"none",stroke:"gray","stroke-width":"1"}})])]),i("g",{attrs:{transform:t.scaleStr}},[i("rect",{attrs:{x:"0",y:"0",width:t.width,height:t.height,fill:t.showGrid?"url(#grid)":t.background},on:{click:t.reset}}),t._l(t.nodeList,(function(e){return i("Node",{key:e.id,attrs:{node:e,selected:e.id===t.selectedNode,createLinkMode:t.createLinkMode,editable:t.editable,labels:t.labels,rWidth:t.rect().rWidth,rHeight:t.rect().rHeight,scale:t.scale},on:{editNode:t.editNode,click:t.clickNode,select:t.selectNode,copy:t.copyNode,updateLocation:t.updateNodeLocation,toggleSelect:t.toggleSrcSelect,commitDest:t.commitDest,remove:t.removeNode}})})),t._l(t.linkList,(function(e){return i("Link",{key:e.id,attrs:{link:e,selected:e.id===t.selectedLink,source:t.findNode(e.source),destination:t.findNode(e.destination),editable:t.editable,labels:t.labels,rWidth:t.rect().rWidth,rHeight:t.rect().rHeight,scale:t.scale},on:{editLink:t.editLink,click:t.clickLink,select:t.selectLink,updateLocation:t.updateLinkLocation,remove:t.removeLink}})}))],2)])])},r=[],s=(i("7514"),i("7f7f"),i("6b54"),i("c5f6"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",[t.editable?i("g",[t.selected?i("text",{staticClass:"button",attrs:{x:t.x+5,y:t.y+t.node.height+22,fill:"#00b894"},on:{click:t.editCandidate}},[t._v("\n      "+t._s(t.labels.edit||"Edit")+"\n    ")]):t._e(),t.selected?i("text",{staticClass:"button",attrs:{x:t.x+5,y:t.y-10,fill:"#00b894",stroke:"none"},on:{click:t.toggleSelect}},[t._v("\n      "+t._s(t.createLinkMode?t.labels.cancel||"Cancel":t.labels.link||"Link")+"\n    ")]):t._e(),t.selected?i("text",{staticClass:"button",attrs:{x:t.x+100,y:t.y-10,fill:"orange"},on:{click:t.copy}},[t._v("\n      "+t._s(t.labels.copy||"Copy")+"\n    ")]):t._e(),t.selected?i("text",{staticClass:"button",attrs:{x:t.x+65,y:t.y+t.node.height+22,fill:"#ff7675"},on:{click:t.remove}},[t._v("\n      "+t._s(t.labels.remove||"Remove")+"\n    ")]):t._e(),t.createLinkMode&&!t.selected?i("text",{staticClass:"button",attrs:{x:t.x+5,y:t.y-10,fill:"#ff7675"},on:{click:t.commitDest}},[t._v("\n      "+t._s(t.labels.select||"Select")+"\n    ")]):t._e()]):t._e(),"ellipse"===t.node.shape?i("ellipse",{staticClass:"grab",attrs:{cx:t.x+t.node.width/2,cy:t.y+t.node.height/2,width:t.node.width,height:t.node.height,rx:t.node.width/2,ry:t.node.height/2,fill:t.content.color||"#ecf0f1","stroke-width":t.node.strokeWeight,stroke:t.node.stroke},on:{touchstart:t.mousedown,mousedown:t.mousedown,mousemove:t.mousemove,touchmove:t.mousemove,mouseup:t.mouseup,touchend:t.mouseup}}):i("rect",{staticClass:"grab",attrs:{x:t.x,y:t.y,width:t.node.width,height:t.node.height,rx:"5",ry:"3",fill:t.content.color||"#ecf0f1","stroke-width":t.node.strokeWeight,stroke:t.node.stroke},on:{touchstart:t.mousedown,mousedown:t.mousedown,mousemove:t.mousemove,touchmove:t.mousemove,mouseup:t.mouseup,touchend:t.mouseup}}),i("a",{attrs:{target:"_blank",href:t.content.url}},[i("text",{attrs:{x:t.x+t.node.width/2,y:t.y+t.node.height/2,fill:"#34495e","font-family":"Meiryo UI, sans-serif","font-size":"20","text-anchor":"middle"}},[t._v("\n      "+t._s(t.content.text)+"\n    ")])])])}),a=[];function c(t){if(Array.isArray(t))return t}function l(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)if(i.push(s.value),e&&i.length===e)break}catch(c){o=!0,r=c}finally{try{n||null==a["return"]||a["return"]()}finally{if(o)throw r}}return i}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function u(t,e){if(t){if("string"===typeof t)return d(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?d(t,e):void 0}}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t,e){return c(t)||l(t,e)||u(t,e)||h()}var p={methods:{getLocation:function(t){var e=0,i=0;return t.touches?(e=t.touches[0].pageX,i=t.touches[0].pageY):(e=t.pageX,i=t.pageY),[e,i]}}},v={mixins:[p],props:{node:{width:Number,height:Number,id:String,point:{type:Object,default:{x:0,y:0}},content:{text:String,url:String,color:String},shape:{type:String,default:"rectangle"},stroke:String,strokeWeight:Number},editable:Boolean,createLinkMode:Boolean,selected:Boolean,labels:Object,scale:String,rWidth:Number,rHeight:Number},watch:{node:function(){this.x=this.node.point.x,this.y=this.node.point.y}},data:function(){return{startPosition:null,cursorOffset:{x:0,y:0},id:this.node.id,x:this.node.point.x,y:this.node.point.y,content:this.node.content}},methods:{toggleSelect:function(){this.$emit("toggleSelect")},commitDest:function(){this.$emit("commitDest",this.id)},remove:function(){this.$emit("remove",this.id)},copy:function(){this.$emit("copy",this.node)},mousedown:function(t){if(this.$emit("click",this.id),this.editable){this.$emit("select",this.id);var e=this.getLocation(t),i=f(e,2),n=i[0],o=i[1];this.cursorOffset.x=n,this.cursorOffset.y=o,this.startPosition={x:this.x,y:this.y},document.addEventListener("mousemove",this.mousemove),document.addEventListener("mouseup",this.mouseup)}},mousemove:function(t){if(this.startPosition){t.preventDefault();var e=this.getLocation(t),i=f(e,2),n=i[0],o=i[1];this.x=this.startPosition.x+(n-this.cursorOffset.x)/this.rWidth/parseFloat(this.scale),this.y=this.startPosition.y+(o-this.cursorOffset.y)/this.rHeight/parseFloat(this.scale),this.$emit("updateLocation",{id:this.id,x:this.x,y:this.y})}},mouseup:function(){this.startPosition=null,document.removeEventListener("mousemove",this.mousemove),document.removeEventListener("mouseup",this.mouseup)},editCandidate:function(){this.$emit("editNode",{id:this.id,shape:this.node.shape,width:this.node.width,height:this.node.height,content:this.content,stroke:this.node.stroke,strokeWeight:this.node.strokeWeight})}}},m=v;i("9385");function g(t,e,i,n,o,r,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(t,e){return c.call(e),d(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:l}}var k=g(m,s,a,!1,null,"337a16d6",null),b=k.exports,y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("g",["bezier"===t.link.shape?i("path",{attrs:{d:"M"+t.calcSource().x+" "+t.calcSource().y+"\n      Q "+t.point.x+" "+t.point.y+"\n      "+t.calcDestination().x+" "+t.calcDestination().y,stroke:t.link.color||"#ffeaa7","stroke-width":"3",fill:"none","stroke-dasharray":t.definePattern(t.link.pattern),"marker-start":"src"===t.link.arrow||"both"===t.link.arrow?"url(#"+t.link.id+")":"","marker-end":"dest"===t.link.arrow||"both"===t.link.arrow?"url(#"+t.link.id+")":""}}):i("line",{attrs:{x1:t.calcSource().x,y1:t.calcSource().y,x2:t.calcDestination().x,y2:t.calcDestination().y,stroke:t.link.color||"#ffeaa7","stroke-width":"3",fill:"none","stroke-dasharray":t.definePattern(t.link.pattern),"marker-start":"src"===t.link.arrow||"both"===t.link.arrow?"url(#"+t.link.id+")":"","marker-end":"dest"===t.link.arrow||"both"===t.link.arrow?"url(#"+t.link.id+")":""}}),i("marker",{attrs:{id:t.link.id,markerUnits:"userSpaceOnUse",orient:"auto-start-reverse",markerWidth:"15",markerHeight:"15",viewBox:"0 0 10 10",refX:"5",refY:"5"}},[i("polygon",{attrs:{points:"0,1.5 0,8.5 10,5 ",fill:t.link.color||"#ffeaa7"}})]),t.editable?i("g",[i("line",{attrs:{x1:t.calcSource().x,y1:t.calcSource().y,x2:t.point.x,y2:t.point.y,stroke:"lightgray"}}),i("line",{attrs:{x1:t.point.x,y1:t.point.y,x2:t.calcDestination().x,y2:t.calcDestination().y,stroke:"lightgray"}}),i("ellipse",{staticClass:"grab",attrs:{id:t.id,cx:t.point.x,cy:t.point.y,rx:"10",ry:"10",fill:"#ff7675","stroke-width":"2"},on:{click:t.select,mousedown:t.mousedown,touchstart:t.mousedown,mousemove:t.mousemove,touchmove:t.mousemove,mouseup:t.mouseup,touchend:t.mouseup}})]):t._e(),i("g",[t.selected?i("text",{staticClass:"button",attrs:{x:t.point.x-15,y:t.point.y-20,fill:"#00b894"},on:{click:t.edit}},[t._v("\n      "+t._s(t.labels.edit||"Edit")+"\n    ")]):t._e(),t.selected?i("text",{staticClass:"button",attrs:{x:t.point.x-15,y:t.point.y+30,fill:"#ff7675"},on:{click:t.remove}},[t._v("\n      "+t._s(t.labels.remove||"Remove")+"\n    ")]):t._e()])])},x=[],w=(i("b54a"),{mixins:[p],props:{selected:Boolean,editable:Boolean,source:{id:Number,x:Number,y:Number},destination:{id:Number,x:Number,y:Number},link:{id:String,color:{type:String,default:"#ffeaa7"},shape:{type:String,default:"straight"},pattern:{type:String,default:"solid"},arrow:{type:String,default:"none"},point:{x:Number,y:Number}},labels:Object,scale:String,rWidth:Number,rHeight:Number},computed:{},data:function(){return{startPosition:null,cursorOffset:{x:0,y:0},id:this.link.id,point:this.link.point}},methods:{mousedown:function(t){this.$emit("click",this.link.id);var e=this.getLocation(t),i=f(e,2),n=i[0],o=i[1];this.cursorOffset.x=n,this.cursorOffset.y=o,this.startPosition={x:this.point.x,y:this.point.y},document.addEventListener("mousemove",this.mousemove),document.addEventListener("mouseup",this.mouseup)},mousemove:function(t){if(this.startPosition){t.preventDefault();var e=this.getLocation(t),i=f(e,2),n=i[0],o=i[1];this.point.x=this.startPosition.x+(n-this.cursorOffset.x)/this.rWidth/parseFloat(this.scale),this.point.y=this.startPosition.y+(o-this.cursorOffset.y)/this.rHeight/parseFloat(this.scale),this.$emit("updateLocation",{id:this.id,x:this.point.x,y:this.point.y})}},definePattern:function(t){return"solid"===t?0:"dash"===t?10:"dot"===t?3:0},mouseup:function(){this.startPosition=null,document.removeEventListener("mousemove",this.mousemove),document.removeEventListener("mouseup",this.mouseup)},remove:function(){this.$emit("remove",this.id)},select:function(){this.$emit("select",this.id)},edit:function(){this.$emit("editLink",{id:this.link.id,content:{color:this.link.color||"#ffeaa7",shape:this.link.shape||"straight",pattern:this.link.pattern||"solid",arrow:this.link.arrow||"none"}})},calcSource:function(){var t=this.point.x-this.source.point.x-this.source.width/2,e=this.point.y-this.source.point.y-this.source.height/2;return 0===t&&(t=.01),Math.abs(e/t)<=1?t>=0?{x:this.source.point.x+this.source.width,y:this.source.point.y+this.source.height/2}:{x:this.source.point.x,y:this.source.point.y+this.source.height/2}:e>=0?{x:this.source.point.x+this.source.width/2,y:this.source.point.y+this.source.height}:{x:this.source.point.x+this.source.width/2,y:this.source.point.y}},calcDestination:function(){var t=this.point.x-this.destination.point.x-this.destination.width/2,e=this.point.y-this.destination.point.y-this.destination.height/2;return 0===t&&(t=.01),Math.abs(e/t)<=1?t>=0?{x:this.destination.point.x+this.destination.width,y:this.destination.point.y+this.destination.height/2}:{x:this.destination.point.x,y:this.destination.point.y+this.destination.height/2}:e>=0?{x:this.destination.point.x+this.destination.width/2,y:this.destination.point.y+this.destination.height}:{x:this.destination.point.x+this.destination.width/2,y:this.destination.point.y}}}}),_=w,S=g(_,y,x,!1,null,"8bca7df4",null),N=S.exports,L={name:"Diagram",props:{width:Number,height:Number,scale:{type:String,default:"1"},background:String,showGrid:Boolean,nodes:Array,links:Array,editable:Boolean,labels:Object,fluid:{type:Boolean,default:!1}},components:{Node:b,Link:N},computed:{viewBoxDiagram:function(){return this.fluid?"0 0 ".concat(this.width/this.scale," ").concat(this.height/this.scale):"0 0 ".concat(this.width," ").concat(this.height)},scaleStr:function(){return"scale("+(this.fluid?1:this.scale||1)+")translate(0,0)"},nodeList:{get:function(){return this.nodes},set:function(t){this.$emit("nodeChanged",{nodes:t})}},linkList:{get:function(){return this.links},set:function(t){this.$emit("linkChanged",{links:t})}}},data:function(){return{name:"",url:"",color:"",selectedNode:-1,selectedLink:-1,createLinkMode:!1}},methods:{editNode:function(t){this.$emit("editNode",t)},editLink:function(t){this.$emit("editLink",t)},generateID:function(){return(new Date).getTime().toString(16)+Math.floor(1e6*Math.random()).toString(16)},addNode:function(){this.editable&&this.nodeList.push({id:this.generateID(),content:{text:this.name,color:this.color,url:this.url},width:200,height:60,point:{x:10,y:100+100*Math.random()}})},reset:function(){this.createLinkMode||(this.selectedNode=-1,this.selectedLink=-1)},updateLinkLocation:function(t){var e=this.linkList.find((function(e){return e.id===t.id}));e.point.x=t.x,e.point.y=t.y},findNode:function(t){return this.nodes.find((function(e){return e.id===t}))},removeLink:function(t){this.linkList=this.linkList.filter((function(e){return e.id!==t}))},rect:function(){if(this.fluid){var t=this.$refs.field.getBoundingClientRect();return{rWidth:t.width/this.width,rHeight:t.height/this.height}}return{rWidth:1,rHeight:1}},updateNodeLocation:function(t){var e=this.nodeList.find((function(e){return e.id===t.id}));e.point.x=t.x,e.point.y=t.y},clickNode:function(t){this.$emit("nodeClicked",t)},clickLink:function(t){this.$emit("linkClicked",t)},selectNode:function(t){this.selectedNode=t},selectLink:function(t){this.selectedLink=t},toggleSrcSelect:function(){this.createLinkMode=!this.createLinkMode},commitDest:function(t){var e=this,i=this.nodeList.find((function(t){return t.id===e.selectedNode})),n=this.nodeList.find((function(e){return e.id===t}));this.linkList.push({id:this.generateID(),source:this.selectedNode,destination:t,point:{x:.5*(i.point.x+n.point.x),y:.5*(i.point.y+n.point.y)}}),this.createLinkMode=!1,this.selectedNode=-1},removeNode:function(t){var e=this.nodeList.filter((function(e){return e.id!==t}));this.nodeList=e;var i=this.linkList.filter((function(e){return e.source!==t&&e.destination!==t}));this.linkList=i,this.createLinkMode=!1},copyNode:function(t){this.editable&&this.nodeList.push({id:this.generateID(),content:{text:t.content.text,color:t.content.color,url:t.content.url},width:t.width,height:t.height,point:{x:t.point.x+30,y:t.point.y+30},shape:t.shape,stroke:t.stroke,strokeWeight:t.strokeWeight})}}},E=L,M=(i("0a01"),g(E,o,r,!1,null,null,null)),A=M.exports,C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"diagram",attrs:{id:"editor"}},[t.editable?i("span",[i("v-btn",{on:{click:t.openModal}},[t._v("New Node")]),i("v-btn",{on:{click:t.endEdit}},[t._v("End")])],1):i("v-btn",{on:{click:function(e){t.editable=!0}}},[t._v("Edit")]),i("v-btn",{on:{click:t.openInputModal}},[t._v("Import/Export")]),i("v-btn",{on:{click:t.downloadSVG}},[t._v("Download SVG")]),i("v-btn",{on:{click:function(e){t.isAskClearDiagram=!0}}},[t._v("Clear Diagram")]),i("v-btn",{on:{click:t.openSettingsModal}},[t._v("Settings")]),i("v-navigation-drawer",{attrs:{absolute:"",temporary:"",right:""},model:{value:t.isAskClearDiagram,callback:function(e){t.isAskClearDiagram=e},expression:"isAskClearDiagram"}},[i("v-card-text",[t._v("\n\t\tDo you wanna clear the Diagram?\n\t\t  ")]),i("v-list-item",{attrs:{color:"red"},on:{click:function(e){return t.clearDiagram()}}},[i("v-list-item-content",[i("v-list-item-title",{staticClass:"title"},[t._v("\n            Yes\n          ")])],1)],1),i("v-list-item",{attrs:{color:"green"},on:{click:function(e){t.isAskClearDiagram=!1}}},[i("v-list-item-content",[i("v-list-item-title",{staticClass:"title"},[t._v("\n            No\n          ")])],1)],1)],1),i("v-navigation-drawer",{attrs:{absolute:"",temporary:"",right:""},model:{value:t.isModalActive,callback:function(e){t.isModalActive=e},expression:"isModalActive"}},[i("EditNodeModal",{attrs:{node:{content:{}}},on:{ok:t.addNode,cancel:t.cancel}})],1),i("v-navigation-drawer",{attrs:{absolute:"",temporary:"",right:""},model:{value:t.isEditModalActive,callback:function(e){t.isEditModalActive=e},expression:"isEditModalActive"}},[i("EditNodeModal",{attrs:{node:t.tmpNode},on:{ok:t.editNode,cancel:t.cancel}})],1),i("v-navigation-drawer",{attrs:{absolute:"",temporary:"",right:""},model:{value:t.isEditLinkModalActive,callback:function(e){t.isEditLinkModalActive=e},expression:"isEditLinkModalActive"}},[i("EditLinkModal",{attrs:{link:t.tmpLink},on:{ok:t.editLink,cancel:t.cancel}})],1),i("v-navigation-drawer",{attrs:{absolute:"",temporary:"",right:""},model:{value:t.isInputModalActive,callback:function(e){t.isInputModalActive=e},expression:"isInputModalActive"}},[i("InputModal",{attrs:{text:t.json},on:{ok:t.importData,cancel:t.cancel}})],1),i("v-navigation-drawer",{attrs:{absolute:"",temporary:"",right:""},model:{value:t.isSettingsModalActive,callback:function(e){t.isSettingsModalActive=e},expression:"isSettingsModalActive"}},[i("v-card",[i("v-card-text",[i("SettingsModal",{attrs:{settings:t.settings},on:{ok:t.updateSettings,cancel:function(e){t.isSettingsModalActive=!1}}})],1)],1)],1),i("v-layout",{attrs:{wrap:""}},[i("v-flex",{staticStyle:{"max-height":"calc(100vh - 200px)",overflow:"auto"},attrs:{xs2:""}},[i("v-expansion-panels",{attrs:{multiple:""}},[t.editable?i("v-expansion-panel",[i("v-expansion-panel-header",[t._v("Edit")]),i("v-expansion-panel-content",[t._v("\n        Editor for selected item here\n      ")])],1):t._e(),t.editable?i("v-expansion-panel",[i("v-expansion-panel-header",[t._v("Add")]),i("v-expansion-panel-content",t._l(t.diagram_items,(function(e,n){return i("v-btn",{key:"shape-"+n,attrs:{icon:""},on:{click:function(i){return t.diagramAdd(e.key)}}},[i("v-icon",[t._v(t._s(e.icon))])],1)})),1)],1):t._e(),i("v-expansion-panel",[i("v-expansion-panel-header",[t._v("Settings")]),i("v-expansion-panel-content",[i("v-list",{attrs:{dense:"",nav:""}},[i("v-list-item",{on:{click:function(e){return t.toggleGrid()}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-grid")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Toggle Grid")])],1)],1),i("v-list-item",{on:{click:function(e){t.isAskClearDiagram=!0}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-nuke")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Clear Diagram")])],1)],1),i("v-list-item",{on:{click:t.openInputModal}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-swap-vertical")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Import/Export")])],1)],1),i("v-list-item",{on:{click:t.downloadSVG}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-download")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Download SVG")])],1)],1),i("v-list-item",{on:{click:function(e){return t.save()}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-content-save")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Save")])],1)],1)],1)],1)],1)],1),t.can_edit?i("v-list-item",{on:{click:function(e){t.editable=!t.editable}}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-pencil")])],1),i("v-list-item-content",[i("v-list-item-subtitle",[t._v("\n            "+t._s(t.editable?"End Edit":"Edit")+"\n          ")])],1)],1):t._e(),i("v-divider"),i("div",[i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",{staticClass:"title"},[t._v("\n            Add\n          ")]),i("v-list-item-subtitle",[t._v("\n            Quick add Items\n          ")])],1)],1),i("v-divider"),t._l(t.diagram_items,(function(e,n){return i("v-btn",{key:"shape-"+n,attrs:{icon:""},on:{click:function(i){return t.diagramAdd(e.key)}}},[i("v-icon",[t._v(t._s(e.icon))])],1)})),i("v-divider")],2),i("v-list-item",[i("v-list-item-content",[i("v-list-item-title",{staticClass:"title"},[t._v("\n            Settings\n          ")]),i("v-list-item-subtitle",[t._v("\n            Quick Settings\n          ")])],1)],1)],1),i("v-flex",{staticStyle:{"max-height":"calc(100vh - 200px)","max-width":"calc(100vw - 500)",overflow:"auto"},attrs:{xs10:""}},[i("Diagram",{attrs:{width:t.graphData.width?t.graphData.width:800,height:t.graphData.height?t.graphData.height:600,fluid:t.settings.isFluid,scale:t.settings.scale,background:t.graphData.background||"#fafafa",showGrid:t.graphData.showGrid,nodes:t.graphData.nodes,links:t.graphData.links,editable:t.editable,labels:t.graphData.labels||{edit:"Edit",remove:"Remove",link:"New Link",select:"Select",cancel:"Cancel",copy:"Copy"}},on:{editNode:t.openNodeEdit,editLink:t.openLinkEdit,nodeClicked:t.nodeClicked,linkClicked:t.linkClicked,nodeChanged:t.nodeChanged,linkChanged:t.linkChanged}})],1)],1)],1)},O=[],D=(i("f751"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"item"}},[t.isActive?i("div",{staticClass:"form"},[i("v-text-field",{attrs:{placeholder:"name"},model:{value:t.newNode.content.text,callback:function(e){t.$set(t.newNode.content,"text",e)},expression:"newNode.content.text"}}),i("br"),i("v-text-field",{attrs:{placeholder:"url"},model:{value:t.newNode.content.url,callback:function(e){t.$set(t.newNode.content,"url",e)},expression:"newNode.content.url"}}),i("br"),i("v-text-field",{attrs:{placeholder:"color"},model:{value:t.newNode.content.color,callback:function(e){t.$set(t.newNode.content,"color",e)},expression:"newNode.content.color"}}),i("br"),i("v-text-field",{attrs:{type:"number",placeholder:"width"},model:{value:t.newNode.width,callback:function(e){t.$set(t.newNode,"width",e)},expression:"newNode.width"}}),i("br"),i("v-text-field",{attrs:{type:"number",placeholder:"height"},model:{value:t.newNode.height,callback:function(e){t.$set(t.newNode,"height",e)},expression:"newNode.height"}}),i("br"),i("v-text-field",{attrs:{type:"text",placeholder:"stroke"},model:{value:t.newNode.stroke,callback:function(e){t.$set(t.newNode,"stroke",e)},expression:"newNode.stroke"}}),i("br"),i("v-text-field",{attrs:{type:"number",placeholder:"stroke weight"},model:{value:t.newNode.strokeWeight,callback:function(e){t.$set(t.newNode,"strokeWeight",e)},expression:"newNode.strokeWeight"}}),i("br"),i("v-select",{attrs:{placeholder:"Select shape"},model:{value:t.newNode.shape,callback:function(e){t.$set(t.newNode,"shape",e)},expression:"newNode.shape"}},[i("option",{attrs:{value:"rectangle",selected:""}},[t._v("Rectangle")]),i("option",{attrs:{value:"ellipse"}},[t._v("Ellipse")])]),i("br"),i("v-btn",{on:{click:t.ok}},[t._v("OK")]),i("v-btn",{staticClass:"danger",on:{click:t.cancel}},[t._v("Cancel")])],1):t._e()])}),$=[],j={props:{isActive:Boolean,node:{type:Object,default:function(){return{id:"",shape:"rectangle",width:150,height:60,stroke:"",strokeWeight:0,content:{text:"none",url:"",color:"#ecf0f1"}}}}},watch:{node:function(){this.newWidth=parseInt(this.node.width),this.newHeight=parseInt(this.node.Height)}},data:function(){return{newNode:this.node}},methods:{ok:function(){this.$emit("ok",this.newNode)},cancel:function(){this.$emit("cancel")}}},I=j,P=(i("b9d3"),g(I,D,$,!1,null,"641b76ed",null)),G=P.exports,F=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"item"}},[t.isActive?i("div",{staticClass:"form"},[i("h2",[t._v("Edit link")]),i("label",[t._v("Color:")]),i("v-text-field",{attrs:{placeholder:"color"},model:{value:t.newLink.color,callback:function(e){t.$set(t.newLink,"color",e)},expression:"newLink.color"}}),i("br"),i("label",[t._v("Shape:")]),i("v-select",{attrs:{placeholder:"Select line shape"},model:{value:t.newLink.shape,callback:function(e){t.$set(t.newLink,"shape",e)},expression:"newLink.shape"}},[i("option",{attrs:{value:"straight"}},[t._v("Straight line")]),i("option",{attrs:{value:"bezier"}},[t._v("Bezier curve")])]),i("br"),i("label",[t._v("Pattern:")]),i("v-select",{attrs:{placeholder:"Select line pattern"},model:{value:t.newLink.pattern,callback:function(e){t.$set(t.newLink,"pattern",e)},expression:"newLink.pattern"}},[i("option",{attrs:{value:"solid",selected:""}},[t._v("Solid")]),i("option",{attrs:{value:"dash"}},[t._v("Dash")]),i("option",{attrs:{value:"dot"}},[t._v("Dot")])]),i("br"),i("label",[t._v("Arrow type:")]),i("v-select",{attrs:{placeholder:"Select arrow type"},model:{value:t.newLink.arrow,callback:function(e){t.$set(t.newLink,"arrow",e)},expression:"newLink.arrow"}},[i("option",{attrs:{value:"none"}},[t._v("none")]),i("option",{attrs:{value:"src"}},[t._v("One side(source)")]),i("option",{attrs:{value:"dest"}},[t._v("One side(destination)")]),i("option",{attrs:{value:"both"}},[t._v("Both side")])]),i("br"),i("v-btn",{on:{click:t.ok}},[t._v("OK")]),i("v-btn",{staticClass:"danger",on:{click:t.cancel}},[t._v("Cancel")])],1):t._e()])},W=[],T={props:{isActive:Boolean,link:{type:Object,default:function(){return{id:"0",content:{color:"#ffeaa7",shape:"straight",pattern:"solid",arrow:"none"}}}}},computed:{newLink:{get:function(){return this.link.content}}},methods:{ok:function(){this.$emit("ok",{id:this.link.id,content:{color:this.newLink.color,shape:this.newLink.shape,pattern:this.newLink.pattern,arrow:this.newLink.arrow}})},cancel:function(){this.$emit("cancel")}}},B=T,R=(i("fc67"),g(B,F,W,!1,null,"bc0d08e0",null)),U=R.exports,H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-textarea",{staticClass:"input",attrs:{required:"",placeholder:"JSON"},model:{value:t.tmp,callback:function(e){t.tmp=e},expression:"tmp"}}),i("br"),i("v-btn",{on:{click:t.ok}},[t._v("OK")]),i("v-btn",{staticClass:"danger",on:{click:t.cancel}},[t._v("Cancel")])],1)},V=[],q={props:{isActive:Boolean,text:String},watch:{text:function(t){this.tmp=t}},data:function(){return{tmp:""}},methods:{ok:function(){this.$emit("ok",{text:this.tmp})},cancel:function(){this.$emit("cancel")}}},z=q,X=(i("afb7"),g(z,H,V,!1,null,"1db2a32c",null)),J=X.exports,Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{on:{clickModal:t.cancel},model:{value:t.isActive,callback:function(e){t.isActive=e},expression:"isActive"}},[i("transition",{attrs:{name:"item"}},[i("div",{staticClass:"block"},[i("div",{staticClass:"inner-block"},[t._t("default")],2),i("v-btn",{on:{click:t.ok}},[t._v("OK")]),i("v-btn",{staticClass:"danger",on:{click:t.cancel}},[t._v("Cancel")])],1)])],1)},K=[],Q={props:{isActive:Boolean},methods:{ok:function(){this.$emit("ok",!0)},cancel:function(){this.$emit("cancel")}}},Z=Q,tt=(i("8245"),g(Z,Y,K,!1,null,"7e191ef0",null)),et=tt.exports,it=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h2",[t._v("Settings")]),i("h3",[t._v("Field Size")]),i("label",[t._v("Width")]),i("v-text-field",{attrs:{type:"number"},model:{value:t.newSettings.width,callback:function(e){t.$set(t.newSettings,"width",e)},expression:"newSettings.width"}}),i("label",[t._v("Height")]),i("v-text-field",{attrs:{type:"number"},model:{value:t.newSettings.height,callback:function(e){t.$set(t.newSettings,"height",e)},expression:"newSettings.height"}}),i("br"),i("h3",[t._v("Scale")]),i("v-select",{attrs:{lebel:"Scale","return-object":!1,items:t.size_options,"item-text":"text","item-value":"value"},model:{value:t.newSettings.scale,callback:function(e){t.$set(t.newSettings,"scale",e)},expression:"newSettings.scale"}}),i("h3",[t._v("Fluid")]),i("v-switch",{attrs:{label:"Toggle fluid"},model:{value:t.newSettings.isFluid,callback:function(e){t.$set(t.newSettings,"isFluid",e)},expression:"newSettings.isFluid"}}),i("h3",[t._v("Background")]),i("v-switch",{attrs:{label:"Show grid"},model:{value:t.newSettings.showGrid,callback:function(e){t.$set(t.newSettings,"showGrid",e)},expression:"newSettings.showGrid"}}),i("v-btn",{on:{click:t.ok}},[t._v("OK")]),i("v-btn",{staticClass:"danger",on:{click:t.cancel}},[t._v("Cancel")])],1)},nt=[],ot={props:{isActive:{type:Boolean,default:!1},settings:{type:Object,default:function(){return{width:1500,height:1e3,scale:"1",isFluid:!1,showGrid:!1}}}},watch:{isActive:function(t){t&&(this.newSettings=JSON.parse(JSON.stringify(this.settings)))},settings:function(t){this.newSettings=JSON.parse(JSON.stringify(t))}},data:function(){return{newSettings:{width:0,height:0,showGrid:!1},size_options:[{text:"Small",val:.5},{text:"Medium",val:1},{text:"Large",val:1.5}]}},methods:{changeGrid:function(){this.$emit("changeGrid")},ok:function(){this.$emit("ok",this.newSettings)},cancel:function(){this.$emit("cancel")}}},rt=ot,st=g(rt,it,nt,!1,null,null,null),at=st.exports,ct={name:"DiagramEditor",components:{Diagram:A,EditNodeModal:G,EditLinkModal:U,InputModal:J,AskModal:et,SettingsModal:at},props:{value:{type:Object,default:function(){return{width:2e3,height:1e3,background:"#fafafa",showGrid:!1,labels:{edit:"Edit",remove:"Remove",link:"New Link",select:"Select",copy:"Copy"},nodes:[],links:[]}}},height:null,width:null,edit_mode:!1,can_edit:!0},watch:{value:function(t){this.init()}},computed:{graphData:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},data:function(){return{diagram_items:[{title:"Square",icon:"mdi-shape-square-plus",key:"square"},{title:"Rectangle",icon:"mdi-shape-rectangle-plus",key:"rectangle"},{title:"Circle",icon:"mdi-shape-circle-plus",key:"circle"},{title:"Elipse",icon:"mdi-shape-oval-plus",key:"elipse"}],name:"",url:"",color:"",json:"",isModalActive:!1,isEditModalActive:!1,isEditLinkModalActive:!1,isInputModalActive:!1,isSettingsModalActive:!1,editable:!1,settings:{width:1500,height:2500,isFluid:!1,scale:"1",showGrid:!1},tmpNode:{id:"",shape:"rectangle",width:0,height:0,content:{text:"",url:"",color:""}},tmpLink:{id:"",content:{color:"",pattern:"solid",arrow:"none"}},isAskClearDiagram:!1}},methods:{init:function(){},save:function(){this.$emit("update",this.graphData)},diagramAdd:function(t){switch(t){case"square":this.addNode({content:{text:"New Square"},width:60,height:60,shape:"rectangle",point:{x:9.999999999999993,y:34.31059443007615}});break;case"rectangle":this.addNode({content:{text:"New Rectangle"},width:100,height:60,shape:"rectangle",point:{x:9.999999999999993,y:34.31059443007615}});break;case"circle":this.addNode({content:{text:"New Circle"},width:60,height:60,shape:"ellipse",point:{x:9.999999999999993,y:34.31059443007615}});break;case"oval":this.addNode({content:{text:"New Elipse"},width:100,height:60,shape:"ellipse",point:{x:9.999999999999993,y:34.31059443007615}});break}},clearDiagram:function(){this.graphData.nodes=[],this.graphData.links=[],this.isAskClearDiagram=!1},generateID:function(){return(new Date).getTime().toString(16)+Math.floor(1e6*Math.random()).toString(16)},openModal:function(){this.isModalActive=!0},cancel:function(){this.isModalActive=!1,this.isEditModalActive=!1,this.isEditLinkModalActive=!1,this.isInputModalActive=!1,this.isAskClearDiagram=!1,this.isSettingsModalActive=!1},addNode:function(t){this.graphData.nodes.push({id:this.generateID(),content:{text:t.content.text,url:t.content.url,color:t.content.color},width:parseInt(t.width)||150,height:parseInt(t.height)||60,stroke:t.stroke,strokeWeight:t.strokeWeight,shape:t.shape,point:{x:10,y:100+100*Math.random()}}),this.isModalActive=!1},openNodeEdit:function(t){this.tmpNode.id=t.id,this.tmpNode.content.text=t.content.text,this.tmpNode.content.url=t.content.url,this.tmpNode.content.color=t.content.color,this.tmpNode.shape=t.shape,this.tmpNode.stroke=t.stroke,this.tmpNode.strokeWeight=t.strokeWeight,this.tmpNode.width=t.width,this.tmpNode.height=t.height,this.isModalActive=!1,this.isEditModalActive=!0},editNode:function(t){var e=this.graphData.nodes.find((function(e){return e.id===t.id}));e.content.text=t.content.text,e.content.url=t.content.url,e.content.color=t.content.color,e.shape=t.shape,e.stroke=t.stroke,e.strokeWeight=t.strokeWeight,e.width=parseInt(t.width),e.height=parseInt(t.height),this.isEditModalActive=!1},openLinkEdit:function(t){this.tmpLink.id=t.id,this.tmpLink.content=Object.assign({},t.content),this.isEditLinkModalActive=!0},editLink:function(t){var e=this.graphData.links.find((function(e){return e.id===t.id}));e.color=t.content.color,e.shape=t.content.shape,e.pattern=t.content.pattern,e.arrow=t.content.arrow,this.isEditLinkModalActive=!1},endEdit:function(){this.editable=!1},nodeClicked:function(t){this.$emit("nodeClicked",t)},linkClicked:function(t){this.$emit("linkClicked",t)},nodeChanged:function(t){this.graphData.nodes=t.nodes},linkChanged:function(t){this.graphData.links=t.links},openInputModal:function(){this.isInputModalActive=!0,this.json=JSON.stringify(this.graphData)},importData:function(t){var e=JSON.parse(t.text);e&&(this.graphData=e,this.isInputModalActive=!1)},downloadSVG:function(){var t=new Blob([document.getElementById("svg-diagram-show-area").innerHTML],{type:"image/svg+xml"}),e=window.URL.createObjectURL(t),i=document.createElement("a");i.href=e,i.download="image.svg",i.click()},changeGrid:function(){this.graphData.width=parseInt(this.settings.width),this.graphData.height=parseInt(this.settings.height),this.graphData.showGrid=this.settings.showGrid},toggleGrid:function(){this.graphData.showGrid=!this.graphData.showGrid},openSettingsModal:function(){this.isSettingsModalActive=!0,this.settings.width=this.graphData.width,this.settings.height=this.graphData.height,this.settings.showGrid=this.graphData.showGrid,this.updateSettings(this.settings)},updateSettings:function(t){this.settings=Object.assign({},t),this.changeGrid()}}},lt=ct,dt=g(lt,C,O,!1,null,null,null),ut=dt.exports,ht=A;e["default"]=ht},fc67:function(t,e,i){"use strict";i("e3f4")},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}})}));
//# sourceMappingURL=diagram.umd.min.js.map